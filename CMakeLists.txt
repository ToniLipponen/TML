cmake_minimum_required(VERSION 3.10)
project(TML)

option(TML_DEBUG_OPENGL_CALLS "Applies error checking around opengl function calls." no)

if(!TML_DEBUG_OPENGL_CALLS)
    add_compile_definitions(NO_GL_DEBUGGING=1)
endif()

file(GLOB_RECURSE SRC_FILES src/*.cpp src/glad.c)
add_subdirectory(external/glfw/)
include_directories(external/glm)

add_library(TML SHARED ${SRC_FILES})
if(WIN32)
    set(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS ON)
    target_link_libraries(TML glfw)
endif(WIN32)
if(MSVC)
    set(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS ON)
    target_link_libraries(TML glfw)
endif(MSVC)
if(UNIX)
    set(GLFW_LIBRARY ${PROJECT_BINARY_DIR}/external/glfw/src/libglfw3.a)
    target_link_libraries(TML ${GLFW_LIBRARY} dl pthread)
endif(UNIX)
target_include_directories(TML PUBLIC external/glm include external-headers)